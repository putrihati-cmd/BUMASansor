ARSITEKTUR SISTEM BUMAS
1. ARSITEKTUR KESELURUHAN
┌─────────────────────────────────────────────────────────┐
│                    MOBILE APPS (Flutter)                 │
├──────────────┬──────────────┬──────────────┬────────────┤
│  App Warung  │  App Kurir   │  App Gudang  │ App Admin  │
│   (POS)      │ (Delivery)   │  (Stock)     │(Dashboard) │
└──────┬───────┴──────┬───────┴──────┬───────┴──────┬─────┘
       │              │              │              │
       └──────────────┴──────────────┴──────────────┘
                          │
                    [API Gateway]
                          │
       ┌──────────────────┴──────────────────┐
       │                                     │
   [REST API]                         [WebSocket]
       │                              (Real-time)
       │                                     │
┌──────┴─────────────────────────────────────┴──────┐
│              BACKEND (Node.js/NestJS)              │
├────────────┬────────────┬────────────┬─────────────┤
│   Auth     │   Stock    │  Finance   │  Reporting  │
│  Service   │  Service   │  Service   │   Service   │
└─────┬──────┴─────┬──────┴─────┬──────┴──────┬──────┘
      │            │            │             │
      └────────────┴────────────┴─────────────┘
                     │
            ┌────────┴────────┐
            │   PostgreSQL    │
            │  + Redis Cache  │
            └─────────────────┘
2. KENAPA TIDAK JAVA/ANDROID SDK?
❌ Java/Android SDK:

Harus buat 2 codebase terpisah (Android + iOS)
Butuh developer berbeda (Android dev + iOS dev)
Development time 2x lipat
Maintenance lebih mahal
UI consistency susah dijaga
Tidak cocok untuk vibe coding (terlalu verbose)

✅ Flutter:

Single Codebase → Android + iOS + Web (bonus)
Hot Reload → cocok untuk vibe coding
VSCode Native Support → smooth development
AI-Friendly → Copilot/Cursor works great
Fast Development → 50% lebih cepat dari native
Cost Effective → 1 dev bisa handle semua platform
Material Design built-in → UI bagus by default

3. TECH STACK REKOMENDASI
yamlFRONTEND (Mobile):
  Framework: Flutter 3.x
  State Management: Riverpod / BLoC
  Local DB: Hive / SQLite (offline-first)
  HTTP Client: Dio
  Code Gen: freezed, json_serializable
  
BACKEND:
  Runtime: Node.js 20+
  Framework: NestJS (TypeScript)
  Database: PostgreSQL 15
  Cache: Redis
  ORM: Prisma / TypeORM
  Auth: JWT + Refresh Token
  File Storage: MinIO / Supabase Storage
  
REALTIME:
  WebSocket: Socket.io
  Push Notification: FCM (Firebase Cloud Messaging)
  
DEVOPS:
  Version Control: Git + GitHub
  CI/CD: GitHub Actions
  Hosting Backend: VPS (DigitalOcean/AWS)
  Hosting DB: Supabase / Railway
  Monitoring: Sentry
  
TOOLS (VSCode):
  Extensions:
    - Flutter (Dart-Code.flutter)
    - GitHub Copilot / Cursor
    - Prisma (untuk DB schema)
    - REST Client (untuk testing API)
    - GitLens
```

### 4. **FLOW BISNIS UTAMA**

#### **A. FLOW DISTRIBUSI BARANG**
```
[Admin Pusat]
    ↓ (1) Buat Purchase Order
[Supplier]
    ↓ (2) Kirim barang
[Gudang] → (3) Terima & Update Stok
    ↓ (4) Admin buat Delivery Order
[Kurir] → (5) Ambil barang + DO
    ↓ (6) Antar ke warung
[Warung] → (7) Terima barang + Konfirmasi
    ↓ (8) Auto update piutang warung
[System] → (9) Catat transaksi distribusi
```

#### **B. FLOW PENJUALAN WARUNG**
```
[Warung - App POS]
    ↓ (1) Scan/Input Produk
    ↓ (2) Hitung Total
    ↓ (3) Pilih Metode Bayar (Cash/Transfer)
    ↓ (4) Cetak/Share Struk
[System]
    ↓ (5) Update Stok Real-time
    ↓ (6) Catat Omzet
    ↓ (7) Hitung Sisa Piutang
[Dashboard Admin]
    ↓ (8) Monitor Real-time
```

#### **C. FLOW PEMBAYARAN PIUTANG**
```
[Warung]
    ↓ (1) Lihat tagihan (tempo: 7/14/30 hari)
    ↓ (2) Bayar via transfer/kurir
[Admin/Kurir]
    ↓ (3) Verifikasi pembayaran
[System]
    ↓ (4) Update saldo piutang
    ↓ (5) Jika lunas → credit limit reset
    ↓ (6) Jika overdue → blokir order baru
5. DATABASE SCHEMA (Simplified)
sql-- Users & Auth
users (id, email, password, role, warung_id)
roles (admin, gudang, kurir, warung)

-- Master Data
products (id, name, barcode, price, margin)
warehouses (id, name, location)
warungs (id, name, owner, credit_limit, credit_days)

-- Inventory
stocks (id, warehouse_id, product_id, qty)
stock_movements (id, type, qty, from, to)

-- Distribution
purchase_orders (id, supplier_id, total, status)
delivery_orders (id, warung_id, kurir_id, status)
do_items (do_id, product_id, qty, price)

-- Sales (POS)
sales (id, warung_id, total, payment_method)
sale_items (sale_id, product_id, qty, price)

-- Finance
receivables (id, warung_id, amount, due_date, status)
payments (id, receivable_id, amount, proof)
```

### 6. **STRUKTUR FOLDER PROJECT**
```
bumas-project/
├── backend/                    # NestJS Backend
│   ├── src/
│   │   ├── auth/              # Authentication module
│   │   ├── users/
│   │   ├── products/
│   │   ├── stocks/
│   │   ├── distribution/
│   │   ├── sales/
│   │   ├── finance/
│   │   ├── reporting/
│   │   └── common/            # Shared utilities
│   ├── prisma/
│   │   └── schema.prisma
│   └── package.json
│
├── mobile-app/                # Flutter App
│   ├── lib/
│   │   ├── core/              # Constants, themes, utils
│   │   ├── models/            # Data models
│   │   ├── services/          # API services
│   │   ├── providers/         # State management
│   │   ├── screens/
│   │   │   ├── warung/        # POS screens
│   │   │   ├── kurir/         # Delivery screens
│   │   │   ├── gudang/        # Warehouse screens
│   │   │   └── admin/         # Dashboard screens
│   │   └── widgets/           # Reusable components
│   └── pubspec.yaml
│
└── docs/                      # Documentation
7. VIBE CODING STRATEGY
Bisa Full AI/Vibe Coding:

✅ UI Components (screens, widgets)
✅ Form validation
✅ Navigation/routing
✅ Basic CRUD operations
✅ Model/DTO generation

Perlu Manual/Review Ketat:

⚠️ Authentication logic
⚠️ Payment processing
⚠️ Credit limit calculation
⚠️ Stock adjustment logic
⚠️ Financial reports
⚠️ Database migrations

Tools untuk Vibe Coding di VSCode:

Flutter snippets - quick templates
Prisma extension - DB schema autocomplete
REST Client - test API langsung di VSCode


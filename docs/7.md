üîπ PROMPT 4.2: Flutter Mobile Deployment (Android & iOS)
markdownBuatkan deployment setup lengkap untuk Flutter mobile app BUMAS ke Play Store dan App Store.

REQUIREMENTS:
1. Build configuration untuk Android & iOS
2. App signing & certificates
3. Play Store deployment
4. App Store deployment
5. CI/CD untuk mobile
6. OTA updates (CodePush alternative)
7. Crash reporting & analytics

GENERATE FILES:

1. `mobile_app/android/app/build.gradle`:
```gradle
def localProperties = new Properties()
def localPropertiesFile = rootProject.file('local.properties')
if (localPropertiesFile.exists()) {
    localPropertiesFile.withReader('UTF-8') { reader ->
        localProperties.load(reader)
    }
}

def flutterRoot = localProperties.getProperty('flutter.sdk')
if (flutterRoot == null) {
    throw new GradleException("Flutter SDK not found. Define location with flutter.sdk in the local.properties file.")
}

def flutterVersionCode = localProperties.getProperty('flutter.versionCode')
if (flutterVersionCode == null) {
    flutterVersionCode = '1'
}

def flutterVersionName = localProperties.getProperty('flutter.versionName')
if (flutterVersionName == null) {
    flutterVersionName = '1.0'
}

// Keystore properties
def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('key.properties')
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}

apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply from: "$flutterRoot/packages/flutter_tools/gradle/flutter.gradle"

android {
    namespace "id.bumas.app"
    compileSdkVersion 34
    ndkVersion flutter.ndkVersion

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = '1.8'
    }

    sourceSets {
        main.java.srcDirs += 'src/main/kotlin'
    }

    defaultConfig {
        applicationId "id.bumas.app"
        minSdkVersion 21
        targetSdkVersion 34
        versionCode flutterVersionCode.toInteger()
        versionName flutterVersionName
        multiDexEnabled true
    }

    signingConfigs {
        release {
            keyAlias keystoreProperties['keyAlias']
            keyPassword keystoreProperties['keyPassword']
            storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null
            storePassword keystoreProperties['storePassword']
        }
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
            
            // Disable debug symbols
            debuggable false
            jniDebuggable false
            renderscriptDebuggable false
            
            // Enable R8 full mode
            android.enableR8.fullMode = true
        }
        
        debug {
            applicationIdSuffix ".debug"
            debuggable true
        }
        
        profile {
            initWith debug
            applicationIdSuffix ".profile"
        }
    }

    flavorDimensions "environment"
    productFlavors {
        production {
            dimension "environment"
            resValue "string", "app_name", "BUMAS"
            buildConfigField "String", "API_URL", '"https://api.bumas.id"'
        }
        
        staging {
            dimension "environment"
            applicationIdSuffix ".staging"
            resValue "string", "app_name", "BUMAS Staging"
            buildConfigField "String", "API_URL", '"https://staging-api.bumas.id"'
        }
        
        development {
            dimension "environment"
            applicationIdSuffix ".dev"
            resValue "string", "app_name", "BUMAS Dev"
            buildConfigField "String", "API_URL", '"http://10.0.2.2:3000"'
        }
    }
}

flutter {
    source '../..'
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
    implementation 'com.google.android.material:material:1.10.0'
    implementation 'androidx.multidex:multidex:2.0.1'
}
```

2. `mobile_app/android/key.properties.example`:
```properties
storePassword=your-keystore-password
keyPassword=your-key-password
keyAlias=upload
storeFile=/path/to/keystore.jks
```

3. `mobile_app/android/app/proguard-rules.pro`:
```proguard
# Flutter wrapper
-keep class io.flutter.app.** { *; }
-keep class io.flutter.plugin.**  { *; }
-keep class io.flutter.util.**  { *; }
-keep class io.flutter.view.**  { *; }
-keep class io.flutter.**  { *; }
-keep class io.flutter.plugins.**  { *; }

# Hive
-keep class * extends io.flutter.embedding.engine.plugins.FlutterPlugin { *; }

# Gson
-keepattributes Signature
-keepattributes *Annotation*
-dontwarn sun.misc.**
-keep class com.google.gson.examples.android.model.** { <fields>; }
-keep class * extends com.google.gson.TypeAdapter
-keep class * implements com.google.gson.TypeAdapterFactory
-keep class * implements com.google.gson.JsonSerializer
-keep class * implements com.google.gson.JsonDeserializer

# Keep data models
-keep class id.bumas.app.models.** { *; }
```

4. `mobile_app/ios/Runner/Info.plist`:
```xml

<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">


    CFBundleDevelopmentRegion
    $(DEVELOPMENT_LANGUAGE)
    CFBundleDisplayName
    BUMAS
    CFBundleExecutable
    $(EXECUTABLE_NAME)
    CFBundleIdentifier
    $(PRODUCT_BUNDLE_IDENTIFIER)
    CFBundleInfoDictionaryVersion
    6.0
    CFBundleName
    BUMAS
    CFBundlePackageType
    APPL
    CFBundleShortVersionString
    $(FLUTTER_BUILD_NAME)
    CFBundleVersion
    $(FLUTTER_BUILD_NUMBER)
    LSRequiresIPhoneOS
    
    UILaunchStoryboardName
    LaunchScreen
    UIMainStoryboardFile
    Main
    UISupportedInterfaceOrientations
    
        UIInterfaceOrientationPortrait
    
    UISupportedInterfaceOrientations~ipad
    
        UIInterfaceOrientationPortrait
        UIInterfaceOrientationLandscapeLeft
        UIInterfaceOrientationLandscapeRight
    
    
    
    NSCameraUsageDescription
    Aplikasi membutuhkan akses kamera untuk scan barcode dan foto bukti pengiriman
    NSPhotoLibraryUsageDescription
    Aplikasi membutuhkan akses galeri untuk upload foto
    NSLocationWhenInUseUsageDescription
    Aplikasi membutuhkan lokasi untuk navigasi pengiriman
    
    
    NSAppTransportSecurity
    
        NSAllowsArbitraryLoads
        
    


```

5. `mobile_app/lib/core/config/app_config.dart`:
```dart
class AppConfig {
  static const String appName = String.fromEnvironment(
    'APP_NAME',
    defaultValue: 'BUMAS',
  );

  static const String apiUrl = String.fromEnvironment(
    'API_URL',
    defaultValue: 'https://api.bumas.id',
  );

  static const String environment = String.fromEnvironment(
    'ENVIRONMENT',
    defaultValue: 'production',
  );

  static const String sentryDsn = String.fromEnvironment(
    'SENTRY_DSN',
    defaultValue: '',
  );

  static const String appVersion = String.fromEnvironment(
    'APP_VERSION',
    defaultValue: '1.0.0',
  );

  static const int buildNumber = int.fromEnvironment(
    'BUILD_NUMBER',
    defaultValue: 1,
  );

  static bool get isProduction => environment == 'production';
  static bool get isStaging => environment == 'staging';
  static bool get isDevelopment => environment == 'development';

  static void printConfig() {
    print('=== App Configuration ===');
    print('App Name: $appName');
    print('Environment: $environment');
    print('API URL: $apiUrl');
    print('Version: $appVersion ($buildNumber)');
    print('========================');
  }
}
```

6. `.github/workflows/flutter-deploy.yml`:
```yaml
name: Flutter Build & Deploy

on:
  push:
    branches: [main, develop]
    tags:
      - 'v*'
  pull_request:
    branches: [main]

env:
  FLUTTER_VERSION: '3.16.0'
  JAVA_VERSION: '17'

jobs:
  # Test Job
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          cache: true
      
      - name: Get dependencies
        run: flutter pub get
      
      - name: Run analyzer
        run: flutter analyze
      
      - name: Run tests
        run: flutter test --coverage
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/lcov.info
          fail_ci_if_error: false

  # Android Build
  build-android:
    needs: test
    runs-on: ubuntu-latest
    if: github.event_name == 'push' && (github.ref == 'refs/heads/main' || startsWith(github.ref, 'refs/tags/v'))
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          cache: true
      
      - name: Setup Java
        uses: actions/setup-java@v3
        with:
          distribution: 'zulu'
          java-version: ${{ env.JAVA_VERSION }}
      
      - name: Decode keystore
        run: |
          echo "${{ secrets.ANDROID_KEYSTORE_BASE64 }}" | base64 --decode > android/app/keystore.jks
      
      - name: Create key.properties
        run: |
          echo "storePassword=${{ secrets.ANDROID_KEYSTORE_PASSWORD }}" > android/key.properties
          echo "keyPassword=${{ secrets.ANDROID_KEY_PASSWORD }}" >> android/key.properties
          echo "keyAlias=upload" >> android/key.properties
          echo "storeFile=keystore.jks" >> android/key.properties
      
      - name: Get dependencies
        run: flutter pub get
      
      - name: Build APK (Production)
        run: |
          flutter build apk \
            --release \
            --flavor production \
            --dart-define=ENVIRONMENT=production \
            --dart-define=API_URL=https://api.bumas.id \
            --build-number=${{ github.run_number }}
      
      - name: Build App Bundle (Production)
        run: |
          flutter build appbundle \
            --release \
            --flavor production \
            --dart-define=ENVIRONMENT=production \
            --dart-define=API_URL=https://api.bumas.id \
            --build-number=${{ github.run_number }}
      
      - name: Upload APK
        uses: actions/upload-artifact@v3
        with:
          name: production-apk
          path: build/app/outputs/flutter-apk/app-production-release.apk
      
      - name: Upload App Bundle
        uses: actions/upload-artifact@v3
        with:
          name: production-aab
          path: build/app/outputs/bundle/productionRelease/app-production-release.aab
      
      - name: Deploy to Play Store
        if: startsWith(github.ref, 'refs/tags/v')
        uses: r0adkll/upload-google-play@v1
        with:
          serviceAccountJsonPlainText: ${{ secrets.PLAY_STORE_SERVICE_ACCOUNT }}
          packageName: id.bumas.app
          releaseFiles: build/app/outputs/bundle/productionRelease/app-production-release.aab
          track: production
          status: completed
          whatsNewDirectory: distribution/whatsnew

  # iOS Build
  build-ios:
    needs: test
    runs-on: macos-latest
    if: github.event_name == 'push' && (github.ref == 'refs/heads/main' || startsWith(github.ref, 'refs/tags/v'))
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: ${{ env.FLUTTER_VERSION }}
          cache: true
      
      - name: Install CocoaPods
        run: |
          cd ios
          pod install
      
      - name: Import Certificate
        uses: apple-actions/import-codesign-certs@v2
        with:
          p12-file-base64: ${{ secrets.IOS_CERTIFICATE_BASE64 }}
          p12-password: ${{ secrets.IOS_CERTIFICATE_PASSWORD }}
      
      - name: Import Provisioning Profile
        run: |
          mkdir -p ~/Library/MobileDevice/Provisioning\ Profiles
          echo "${{ secrets.IOS_PROVISION_PROFILE_BASE64 }}" | base64 --decode > ~/Library/MobileDevice/Provisioning\ Profiles/profile.mobileprovision
      
      - name: Get dependencies
        run: flutter pub get
      
      - name: Build iOS (Production)
        run: |
          flutter build ios \
            --release \
            --no-codesign \
            --dart-define=ENVIRONMENT=production \
            --dart-define=API_URL=https://api.bumas.id \
            --build-number=${{ github.run_number }}
      
      - name: Build IPA
        run: |
          cd ios
          xcodebuild -workspace Runner.xcworkspace \
            -scheme Runner \
            -configuration Release \
            -archivePath build/Runner.xcarchive \
            archive
          
          xcodebuild -exportArchive \
            -archivePath build/Runner.xcarchive \
            -exportPath build \
            -exportOptionsPlist ExportOptions.plist
      
      - name: Upload IPA
        uses: actions/upload-artifact@v3
        with:
          name: production-ipa
          path: ios/build/BUMAS.ipa
      
      - name: Deploy to TestFlight
        if: startsWith(github.ref, 'refs/tags/v')
        uses: apple-actions/upload-testflight-build@v1
        with:
          app-path: ios/build/BUMAS.ipa
          issuer-id: ${{ secrets.APP_STORE_CONNECT_ISSUER_ID }}
          api-key-id: ${{ secrets.APP_STORE_CONNECT_KEY_ID }}
          api-private-key: ${{ secrets.APP_STORE_CONNECT_PRIVATE_KEY }}

  # Create Release
  create-release:
    needs: [build-android, build-ios]
    runs-on: ubuntu-latest
    if: startsWith(github.ref, 'refs/tags/v')
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Download APK
        uses: actions/download-artifact@v3
        with:
          name: production-apk
          path: ./artifacts
      
      - name: Download AAB
        uses: actions/download-artifact@v3
        with:
          name: production-aab
          path: ./artifacts
      
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          files: |
            artifacts/app-production-release.apk
            artifacts/app-production-release.aab
          body_path: CHANGELOG.md
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

7. `mobile_app/scripts/build-all.sh`:
```bash
#!/bin/bash

set -e

echo "üöÄ Building BUMAS Mobile App for all platforms..."

# Check if Flutter is installed
if ! command -v flutter &> /dev/null; then
    echo "‚ùå Flutter is not installed!"
    exit 1
fi

# Get version from pubspec.yaml
VERSION=$(grep "version:" pubspec.yaml | cut -d' ' -f2 | cut -d'+' -f1)
BUILD_NUMBER=$(grep "version:" pubspec.yaml | cut -d'+' -f2)

echo "üì¶ Version: $VERSION ($BUILD_NUMBER)"

# Clean
echo "üßπ Cleaning..."
flutter clean
flutter pub get

# Build Android APK (Production)
echo "ü§ñ Building Android APK (Production)..."
flutter build apk \
  --release \
  --flavor production \
  --dart-define=ENVIRONMENT=production \
  --dart-define=API_URL=https://api.bumas.id \
  --build-number=$BUILD_NUMBER

# Build Android App Bundle (Production)
echo "ü§ñ Building Android App Bundle (Production)..."
flutter build appbundle \
  --release \
  --flavor production \
  --dart-define=ENVIRONMENT=production \
  --dart-define=API_URL=https://api.bumas.id \
  --build-number=$BUILD_NUMBER

# Build iOS (if on macOS)
if [[ "$OSTYPE" == "darwin"* ]]; then
  echo "üçé Building iOS (Production)..."
  flutter build ios \
    --release \
    --dart-define=ENVIRONMENT=production \
    --dart-define=API_URL=https://api.bumas.id \
    --build-number=$BUILD_NUMBER
else
  echo "‚ö†Ô∏è  Skipping iOS build (not on macOS)"
fi

# Create distribution folder
echo "üìÅ Creating distribution folder..."
DIST_DIR="distribution/v$VERSION-$BUILD_NUMBER"
mkdir -p "$DIST_DIR"

# Copy builds
cp build/app/outputs/flutter-apk/app-production-release.apk "$DIST_DIR/"
cp build/app/outputs/bundle/productionRelease/app-production-release.aab "$DIST_DIR/"

echo "‚úÖ Build completed successfully!"
echo "üì¶ Distribution files: $DIST_DIR"

# Generate checksums
echo "üîê Generating checksums..."
cd "$DIST_DIR"
sha256sum * > checksums.txt
cd -

echo ""
echo "=== Build Summary ==="
echo "Version: $VERSION"
echo "Build: $BUILD_NUMBER"
echo "APK: $DIST_DIR/app-production-release.apk"
echo "AAB: $DIST_DIR/app-production-release.aab"
echo "===================="
```

8. `mobile_app/lib/main.dart` - Add error reporting:
```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:sentry_flutter/sentry_flutter.dart';
import 'package:firebase_core/firebase_core.dart';
import 'package:firebase_crashlytics/firebase_crashlytics.dart';
import 'core/config/app_config.dart';
import 'app.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  // Print configuration
  AppConfig.printConfig();

  // Initialize Firebase
  if (AppConfig.isProduction) {
    await Firebase.initializeApp();
    
    // Setup Crashlytics
    FlutterError.onError = FirebaseCrashlytics.instance.recordFlutterFatalError;
  }

  // Initialize Sentry for error tracking
  if (AppConfig.sentryDsn.isNotEmpty) {
    await SentryFlutter.init(
      (options) {
        options.dsn = AppConfig.sentryDsn;
        options.environment = AppConfig.environment;
        options.release = '${AppConfig.appVersion}+${AppConfig.buildNumber}';
        options.tracesSampleRate = AppConfig.isProduction ? 0.1 : 1.0;
        options.beforeSend = (event, hint) {
          // Don't send events in development
          if (AppConfig.isDevelopment) return null;
          return event;
        };
      },
      appRunner: () => runApp(
        const ProviderScope(
          child: MyApp(),
        ),
      ),
    );
  } else {
    runApp(
      const ProviderScope(
        child: MyApp(),
      ),
    );
  }
}
```

9. `mobile_app/distribution/whatsnew/whatsnew-id-ID`:
```
Version 1.0.0:
- Rilis pertama aplikasi BUMAS
- Fitur POS (Point of Sale) untuk warung
- Manajemen stock real-time
- Sistem piutang terintegrasi
- Mode offline untuk transaksi
- Dashboard admin lengkap
- Tracking pengiriman untuk kurir
```

10. `mobile_app/fastlane/Fastfile`:
```ruby
default_platform(:android)

platform :android do
  desc "Deploy to Play Store Internal Track"
  lane :internal do
    gradle(
      task: "bundle",
      flavor: "production",
      build_type: "Release"
    )
    
    upload_to_play_store(
      track: 'internal',
      aab: '../build/app/outputs/bundle/productionRelease/app-production-release.aab',
      skip_upload_metadata: true,
      skip_upload_images: true,
      skip_upload_screenshots: true
    )
  end

  desc "Deploy to Play Store Beta Track"
  lane :beta do
    gradle(
      task: "bundle",
      flavor: "production",
      build_type: "Release"
    )
    
    upload_to_play_store(
      track: 'beta',
      aab: '../build/app/outputs/bundle/productionRelease/app-production-release.aab'
    )
  end

  desc "Deploy to Play Store Production"
  lane :production do
    gradle(
      task: "bundle",
      flavor: "production",
      build_type: "Release"
    )
    
    upload_to_play_store(
      track: 'production',
      aab: '../build/app/outputs/bundle/productionRelease/app-production-release.aab'
    )
  end
end

platform :ios do
  desc "Deploy to TestFlight"
  lane :beta do
    build_app(
      workspace: "Runner.xcworkspace",
      scheme: "Runner",
      export_method: "app-store"
    )
    
    upload_to_testflight(
      skip_waiting_for_build_processing: true
    )
  end

  desc "Deploy to App Store"
  lane :production do
    build_app(
      workspace: "Runner.xcworkspace",
      scheme: "Runner",
      export_method: "app-store"
    )
    
    upload_to_app_store(
      submit_for_review: true,
      automatic_release: true,
      force: true
    )
  end
end
```

DEPLOYMENT COMMANDS:
```bash
# Generate keystore (Android) - ONCE
keytool -genkey -v -keystore ~/upload-keystore.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias upload

# Build for all environments
# Development
flutter build apk --flavor development --dart-define=ENVIRONMENT=development

# Staging
flutter build apk --flavor staging --dart-define=ENVIRONMENT=staging

# Production
./scripts/build-all.sh

# Deploy to Play Store (using fastlane)
cd android
bundle exec fastlane internal    # Internal testing
bundle exec fastlane beta        # Beta testing
bundle exec fastlane production  # Production release

# Deploy to App Store (using fastlane)
cd ios
bundle exec fastlane beta        # TestFlight
bundle exec fastlane production  # App Store
```

PLAY STORE SETUP:

1. Create app in Google Play Console
2. Upload first APK/AAB manually
3. Setup service account for API access
4. Add secrets to GitHub:
   - ANDROID_KEYSTORE_BASE64
   - ANDROID_KEYSTORE_PASSWORD
   - ANDROID_KEY_PASSWORD
   - PLAY_STORE_SERVICE_ACCOUNT

APP STORE SETUP:

1. Create app in App Store Connect
2. Generate certificates & provisioning profiles
3. Setup App Store Connect API
4. Add secrets to GitHub:
   - IOS_CERTIFICATE_BASE64
   - IOS_CERTIFICATE_PASSWORD
   - IOS_PROVISION_PROFILE_BASE64
   - APP_STORE_CONNECT_ISSUER_ID
   - APP_STORE_CONNECT_KEY_ID
   - APP_STORE_CONNECT_PRIVATE_KEY

Berikan implementasi lengkap dengan OTA updates menggunakan Shorebird atau CodeMagic!

üîπ PROMPT 4.3: Complete Documentation
markdownBuatkan dokumentasi lengkap untuk project BUMAS yang mencakup technical documentation, user manual, dan API documentation.

REQUIREMENTS:
1. README.md komprehensif
2. API Documentation (OpenAPI/Swagger)
3. User Manual per role
4. Developer Guide
5. Deployment Guide
6. Troubleshooting Guide
7. Architecture Documentation

GENERATE FILES:

1. `README.md` (Root Project):
```markdown
# üè™ BUMAS - BUM Ansor Banyumas

Sistem manajemen distribusi warung terintegrasi berbasis digital untuk BUM Ansor Banyumas.

![BUMAS Logo](assets/logo.png)

## üìã Daftar Isi

- [Tentang Project](#tentang-project)
- [Fitur Utama](#fitur-utama)
- [Teknologi Stack](#teknologi-stack)
- [Arsitektur Sistem](#arsitektur-sistem)
- [Prerequisites](#prerequisites)
- [Instalasi](#instalasi)
- [Deployment](#deployment)
- [Testing](#testing)
- [Dokumentasi](#dokumentasi)
- [Kontribusi](#kontribusi)
- [Lisensi](#lisensi)

## üéØ Tentang Project

BUMAS adalah platform distribusi yang menghubungkan gudang pusat dengan warung-warung mitra Ansor Banyumas. Sistem ini menyediakan:

- **POS (Point of Sale)** untuk transaksi warung
- **Inventory Management** real-time
- **Credit Management** dengan piutang otomatis
- **Delivery Tracking** untuk kurir
- **Admin Dashboard** dengan analytics lengkap
- **Offline-First** capability

### Target Pencapaian

**Tahun 1**: 50 warung | Omzet Rp 2.4M | Laba Rp 96 juta
**Tahun 2**: 150 warung | Omzet Rp 7.2M | Laba Rp 396 juta
**Tahun 3**: 300 warung | Omzet Rp 14.4M | Laba Rp 864 juta

## ‚ú® Fitur Utama

### üè¨ Aplikasi Warung (POS)
- ‚úÖ Scan barcode produk
- ‚úÖ Keranjang belanja
- ‚úÖ Multiple payment methods (Cash, Transfer, QRIS, EDC)
- ‚úÖ Struk digital & print
- ‚úÖ Offline mode
- ‚úÖ Manajemen piutang
- ‚úÖ Riwayat transaksi

### üì¶ Aplikasi Gudang
- ‚úÖ Stock overview real-time
- ‚úÖ Terima barang (PO receiving)
- ‚úÖ Siapkan pengiriman (DO packing)
- ‚úÖ Stock opname
- ‚úÖ Low stock alerts

### üöö Aplikasi Kurir
- ‚úÖ List delivery orders
- ‚úÖ Navigasi ke warung
- ‚úÖ Konfirmasi pengiriman dengan foto & signature
- ‚úÖ Riwayat pengiriman

### üíº Admin Dashboard
- ‚úÖ Dashboard overview (omzet, piutang, laba)
- ‚úÖ Manajemen warung (CRUD, credit limit)
- ‚úÖ Manajemen produk
- ‚úÖ Buat delivery order
- ‚úÖ Verifikasi pembayaran
- ‚úÖ Laporan lengkap (daily, monthly, aging)

## üõ† Teknologi Stack

### Backend
```
‚îú‚îÄ‚îÄ NestJS (TypeScript)
‚îú‚îÄ‚îÄ Prisma ORM
‚îú‚îÄ‚îÄ PostgreSQL 15
‚îú‚îÄ‚îÄ Redis (caching)
‚îú‚îÄ‚îÄ JWT Authentication
‚îú‚îÄ‚îÄ Socket.io (real-time)
‚îî‚îÄ‚îÄ Docker
```

### Mobile
```
‚îú‚îÄ‚îÄ Flutter 3.16+
‚îú‚îÄ‚îÄ Riverpod (state management)
‚îú‚îÄ‚îÄ Hive (local database)
‚îú‚îÄ‚îÄ Dio (HTTP client)
‚îú‚îÄ‚îÄ Go Router (navigation)
‚îî‚îÄ‚îÄ Material Design 3
```

### Infrastructure
```
‚îú‚îÄ‚îÄ Docker & Docker Compose
‚îú‚îÄ‚îÄ Nginx (reverse proxy)
‚îú‚îÄ‚îÄ GitHub Actions (CI/CD)
‚îú‚îÄ‚îÄ Railway/Render (hosting)
‚îî‚îÄ‚îÄ Sentry (error tracking)
```

## üèó Arsitektur Sistem
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 Mobile Apps                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Warung  ‚îÇ  Kurir   ‚îÇ  Gudang  ‚îÇ  Admin   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  (POS)   ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                   [API Gateway]
                        ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                               ‚îÇ
    [REST API]                    [WebSocket]
        ‚îÇ                          (Real-time)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          NestJS Backend                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Auth  ‚îÇ Stocks  ‚îÇ Finance  ‚îÇ  Reports   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ         ‚îÇ         ‚îÇ            ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   PostgreSQL + Redis ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
üì¶ Prerequisites
Backend Development

Node.js >= 20.x
PostgreSQL >= 15
Redis >= 7
Docker & Docker Compose (optional)

Mobile Development

Flutter >= 3.16
Dart >= 3.2
Android Studio / Xcode
VS Code dengan Flutter extension

üöÄ Instalasi
1. Clone Repository
bashgit clone https://github.com/bumas/bumas-app.git
cd bumas-app
2. Backend Setup
bashcd backend

# Install dependencies
npm install

# Copy environment file
cp .env.example .env

# Edit .env dengan konfigurasi Anda
nano .env

# Generate Prisma client
npx prisma generate

# Run migrations
npx prisma migrate dev

# Seed database (optional)
npx prisma db seed

# Start development server
npm run start:dev
Backend akan berjalan di http://localhost:3000
3. Mobile Setup
bashcd mobile_app

# Install dependencies
flutter pub get

# Run code generation
flutter pub run build_runner build --delete-conflicting-outputs

# Run app
flutter run

# Atau spesifik flavor
flutter run --flavor development --dart-define=ENVIRONMENT=development
üê≥ Docker Setup (Recommended)
bash# Start semua services
docker-compose up -d

# Check logs
docker-compose logs -f app

# Stop services
docker-compose down
Services yang tersedia:

Backend: http://localhost:3000
PostgreSQL: localhost:5432
Redis: localhost:6379
Nginx: http://localhost:80

üì± Build Mobile App
Android
bash# Debug
flutter build apk --debug

# Release
flutter build apk --release --flavor production

# App Bundle (for Play Store)
flutter build appbundle --release --flavor production
iOS
bash# Debug
flutter build ios --debug

# Release
flutter build ios --release
üß™ Testing
Backend
bash# Unit tests
npm test

# E2E tests
npm run test:e2e

# Coverage
npm run test:cov
Mobile
bash# Unit tests
flutter test

# Integration tests
flutter test integration_test/

# Coverage
flutter test --coverage
üö¢ Deployment
Backend ke Production
bash# Using Docker
./scripts/deploy.sh

# Manual
npm run build
npm run start:prod

# Using Railway CLI
railway up
railway run npx prisma migrate deploy
Mobile ke Stores
bash# Play Store
cd android
bundle exec fastlane production

# App Store
cd ios
bundle exec fastlane production
```

Lihat [Deployment Guide](docs/DEPLOYMENT.md) untuk detail lengkap.

## üìö Dokumentasi

- **[API Documentation](docs/API.md)** - Complete API reference
- **[User Manual - Admin](docs/USER_MANUAL_ADMIN.md)**
- **[User Manual - Warung](docs/USER_MANUAL_WARUNG.md)**
- **[User Manual - Kurir](docs/USER_MANUAL_KURIR.md)**
- **[User Manual - Gudang](docs/USER_MANUAL_GUDANG.md)**
- **[Developer Guide](docs/DEVELOPER_GUIDE.md)**
- **[Architecture](docs/ARCHITECTURE.md)**
- **[Troubleshooting](docs/TROUBLESHOOTING.md)**

## ü§ù Kontribusi

Kami menerima kontribusi! Silakan baca [CONTRIBUTING.md](CONTRIBUTING.md) untuk guidelines.

### Development Workflow

1. Fork repository
2. Create feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Open Pull Request

### Code Style

- Backend: Follow NestJS style guide
- Mobile: Follow Effective Dart guidelines
- Use Prettier/Dart Format
- Write tests for new features

## üìÑ Lisensi

Project ini dilisensikan under MIT License - lihat [LICENSE](LICENSE) untuk detail.

## üë• Tim

- **Project Manager**: Ahmad Dahlan
- **Backend Developer**: Budi Santoso
- **Mobile Developer**: Citra Dewi
- **UI/UX Designer**: Dani Firmansyah

## üìû Kontak

- Email: support@bumas.id
- Website: https://bumas.id
- GitHub: https://github.com/bumas

---

**BUMAS** - BUM Ansor Banyumas
Memberdayakan Ekonomi Umat melalui Teknologi
```

2. `docs/API.md`:
```markdown
# BUMAS API Documentation

Base URL: `https://api.bumas.id`

## Authentication

All API requests require authentication using JWT token in the `Authorization` header:
```
Authorization: Bearer <your_token_here>
Endpoints
Authentication
Register
httpPOST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123",
  "name": "John Doe",
  "role": "WARUNG"
}
Response 201:
json{
  "id": "uuid",
  "email": "user@example.com",
  "name": "John Doe",
  "role": "WARUNG",
  "createdAt": "2024-01-15T10:00:00Z"
}
Login
httpPOST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "password123"
}
Response 200:
json{
  "accessToken": "eyJhbGciOiJIUzI1NiIs...",
  "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
  "user": {
    "id": "uuid",
    "email": "user@example.com",
    "name": "John Doe",
    "role": "WARUNG"
  }
}
Products
Get All Products
httpGET /api/products?page=1&limit=10&search=indomie
Authorization: Bearer <token>
Query Parameters:

page (optional): Page number (default: 1)
limit (optional): Items per page (default: 10)
search (optional): Search by name/barcode
categoryId (optional): Filter by category
isActive (optional): Filter by active status

Response 200:
json{
  "data": [
    {
      "id": "uuid",
      "name": "Indomie Goreng",
      "barcode": "INDO001",
      "categoryId": "uuid",
      "category": {
        "id": "uuid",
        "name": "Mie Instan"
      },
      "buyPrice": 2500,
      "sellPrice": 3000,
      "margin": 20,
      "unit": "pcs",
      "isActive": true,
      "currentStock": 100
    }
  ],
  "meta": {
    "total": 50,
    "page": 1,
    "limit": 10,
    "totalPages": 5
  }
}
Create Product
httpPOST /api/products
Authorization: Bearer <token>
Content-Type: application/json

{
  "name": "Indomie Goreng",
  "barcode": "INDO001",
  "categoryId": "uuid",
  "buyPrice": 2500,
  "sellPrice": 3000,
  "unit": "pcs"
}
Response 201:
json{
  "id": "uuid",
  "name": "Indomie Goreng",
  "barcode": "INDO001",
  "margin": 20,
  "createdAt": "2024-01-15T10:00:00Z"
}
Sales
Create Sale
httpPOST /api/sales
Authorization: Bearer <token>
Content-Type: application/json

{
  "warungId": "uuid",
  "items": [
    {
      "productId": "uuid",
      "quantity": 5,
      "price": 3000,
      "discount": 0
    }
  ],
  "discount": 0,
  "paymentMethod": "CASH",
  "cashReceived": 20000,
  "notes": "Optional notes"
}
Response 201:
json{
  "id": "uuid",
  "saleNumber": "SALE-20240115-001",
  "warungId": "uuid",
  "subtotal": 15000,
  "discount": 0,
  "totalAmount": 15000,
  "paymentMethod": "CASH",
  "cashReceived": 20000,
  "cashChange": 5000,
  "createdAt": "2024-01-15T10:00:00Z",
  "items": [
    {
      "productId": "uuid",
      "productName": "Indomie Goreng",
      "quantity": 5,
      "price": 3000,
      "subtotal": 15000
    }
  ]
}
Finance
Get Receivables
httpGET /api/receivables?warungId=uuid&status=UNPAID
Authorization: Bearer <token>
Query Parameters:

warungId (optional): Filter by warung
status (optional): UNPAID, PARTIAL, PAID, OVERDUE
page, limit: Pagination

Response 200:
json{
  "data": [
    {
      "id": "uuid",
      "invoiceNo": "INV-20240115-001",
      "warungId": "uuid",
      "warung": {
        "id": "uuid",
        "name": "Warung Berkah"
      },
      "amount": 1000000,
      "paid": 500000,
      "balance": 500000,
      "dueDate": "2024-02-15T00:00:00Z",
      "status": "PARTIAL",
      "createdAt": "2024-01-15T10:00:00Z"
    }
  ],
  "meta": {...}
}
Record Payment
httpPOST /api/payments
Authorization: Bearer <token>
Content-Type: application/json

{
  "receivableId": "uuid",
  "amount": 500000,
  "paymentMethod": "TRANSFER",
  "paymentProof": "base64_encoded_image",
  "notes": "Payment via BCA"
}
Response 201:
json{
  "id": "uuid",
  "paymentNo": "PAY-20240115-001",
  "receivableId": "uuid",
  "amount": 500000,
  "paymentMethod": "TRANSFER",
  "verifiedBy": null,
  "verifiedAt": null,
  "createdAt": "2024-01-15T10:00:00Z"
}
Error Responses
All errors follow this format:
json{
  "statusCode": 400,
  "message": "Validation failed",
  "error": "Bad Request",
  "details": [
    {
      "field": "email",
      "message": "Invalid email format"
    }
  ]
}
```

### Common Status Codes

- `200` OK - Request successful
- `201` Created - Resource created
- `400` Bad Request - Invalid input
- `401` Unauthorized - Missing or invalid token
- `403` Forbidden - Insufficient permissions
- `404` Not Found - Resource not found
- `409` Conflict - Resource already exists
- `500` Internal Server Error - Server error

## Rate Limiting

API is rate limited to:
- **10 requests per second** per IP
- **1000 requests per hour** per user

Rate limit headers:
```
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 999
X-RateLimit-Reset: 1705315200
Pagination
All list endpoints support pagination:
httpGET /api/products?page=2&limit=20
Response includes metadata:
json{
  "data": [...],
  "meta": {
    "total": 100,
    "page": 2,
    "limit": 20,
    "totalPages": 5,
    "hasNext": true,
    "hasPrev": true
  }
}
WebSocket Events
Connect to wss://api.bumas.id/socket
Events
stock_updated
json{
  "event": "stock_updated",
  "data": {
    "productId": "uuid",
    "warehouseId": "uuid",
    "quantity": 95,
    "previousQuantity": 100
  }
}
sale_created
json{
  "event": "sale_created",
  "data": {
    "saleId": "uuid",
    "warungId": "uuid",
    "totalAmount": 50000
  }
}
```

## Postman Collection

Import our Postman collection: [Download](https://api.bumas.id/postman-collection.json)

## SDKs

- JavaScript/TypeScript: `npm install @bumas/sdk`
- Dart: `flutter pub add bumas_sdk`
```

3. `docs/USER_MANUAL_WARUNG.md`:
```markdown
# User Manual - Aplikasi Warung (POS)

Panduan lengkap penggunaan aplikasi BUMAS untuk pengelola warung.

## Daftar Isi
1. [Login](#login)
2. [Transaksi Penjualan](#transaksi-penjualan)
3. [Manajemen Stock](#manajemen-stock)
4. [Piutang & Pembayaran](#piutang--pembayaran)
5. [Laporan](#laporan)
6. [Mode Offline](#mode-offline)

## Login

1. Buka aplikasi BUMAS
2. Masukkan email dan password Anda
3. Tap tombol **Login**

![Login Screen](images/login.png)

**Lupa Password?**
Hubungi admin untuk reset password.

## Transaksi Penjualan

### Cara Melakukan Penjualan

#### Metode 1: Manual
1. Di halaman POS, ketik nama produk di kolom pencarian
2. Tap produk yang ingin dijual
3. Produk akan masuk ke keranjang
4. Untuk mengubah jumlah, tap tombol **+** atau **-**
5. Setelah selesai, tap keranjang di pojok kanan bawah
6. Tap **Checkout**

#### Metode 2: Scan Barcode
1. Tap icon **Scan** (üì∑) di pojok kanan atas
2. Arahkan kamera ke barcode produk
3. Produk otomatis masuk ke keranjang

![POS Screen](images/pos.png)

### Proses Checkout

1. Di halaman checkout, cek kembali item yang dibeli
2. Pilih metode pembayaran:
   - **Cash** (Tunai)
   - **Transfer Bank**
   - **QRIS**
   - **EDC** (Kartu Debit/Kredit)

3. Jika Cash, masukkan nominal uang yang diterima
4. Sistem akan hitung kembalian otomatis
5. Tap **Proses Pembayaran**
6. Transaksi berhasil! Struk dapat di-share atau print

![Checkout Screen](images/checkout.png)

### Cetak/Share Struk

Setelah transaksi selesai:
- Tap icon **Share** untuk kirim via WhatsApp/Email
- Tap icon **Print** untuk cetak (jika ada printer bluetooth)

## Manajemen Stock

### Cek Stock Produk

1. Di halaman POS, setiap produk menampilkan stock sisa
2. Untuk detail, tap pada produk
3. Stock yang rendah ditandai dengan warna **orange**

![Stock Low](images/stock-low.png)

### Request Restock

1. Tap menu **Stock** di bottom navigation
2. Lihat list produk dengan stock rendah
3. Tap **Request Restock**
4. Admin akan memproses permintaan Anda

## Piutang & Pembayaran

### Cek Tagihan

1. Tap menu **Tagihan**
2. Lihat total piutang Anda
3. Detail tagihan:
   - **Belum Lunas**: Warna merah
   - **Jatuh Tempo**: Tanggal limit bayar
   - **Total**: Jumlah yang harus dibayar

![Receivables](images/receivables.png)

### Bayar Tagihan

1. Di halaman Tagihan, pilih invoice yang ingin dibayar
2. Tap **Bayar**
3. Pilih metode pembayaran
4. Upload bukti transfer (jika transfer)
5. Tap **Kirim Pembayaran**
6. Tunggu verifikasi dari admin

**Penting!**
- Bayar tagihan sebelum jatuh tempo
- Jika terlambat > 3 hari, akun akan diblokir
- Setelah lunas, akun akan aktif kembali

## Laporan

### Laporan Harian

1. Tap menu **Laporan**
2. Pilih **Hari Ini**
3. Lihat:
   - Total penjualan
   - Jumlah transaksi
   - Metode pembayaran

### Laporan Bulanan

1. Pilih **Bulan Ini**
2. Lihat grafik penjualan per hari
3. Download laporan (PDF/Excel)

## Mode Offline

Aplikasi tetap bisa digunakan **tanpa internet**!

### Cara Kerja

1. Saat offline, icon ‚òÅÔ∏è akan muncul
2. Transaksi tetap bisa dilakukan
3. Data disimpan di HP
4. Saat online lagi, data otomatis tersinkronisasi

![Offline Mode](images/offline.png)

**Tips:**
- Pastikan data produk sudah di-cache sebelum offline
- Cek sinkronisasi setelah online kembali
- Pending sync ditampilkan di bagian atas

## Troubleshooting

### Tidak Bisa Login
- Cek koneksi internet
- Pastikan email/password benar
- Hubungi admin jika lupa password

### Transaksi Gagal
- Cek stock produk
- Pastikan tidak ada maintenance
- Coba lagi dalam beberapa saat

### Data Tidak Sync
- Pastikan internet stabil
- Tap icon sync manual
- Restart aplikasi

## Kontak Support

Jika mengalami masalah:
- **WhatsApp**: 0812-3456-7890
- **Email**: support@bumas.id
- **Jam Operasional**: 08:00 - 17:00 WIB

---

¬© 2024 BUMAS - BUM Ansor Banyumas
```

4. `docs/TROUBLESHOOTING.md`:
```markdown
# Troubleshooting Guide

Common issues and solutions for BUMAS system.

## Backend Issues

### Database Connection Failed

**Error:**
```
Error: P1001: Can't reach database server
Solutions:

Check if PostgreSQL is running:

bashsudo systemctl status postgresql
# atau
docker ps | grep postgres

Verify DATABASE_URL in .env:

envDATABASE_URL="postgresql://user:password@localhost:5432/database"

Check firewall:

bashsudo ufw allow 5432/tcp
```

### Migration Failed

**Error:**
```
Error: Migration failed to apply
Solutions:

Reset database (DEVELOPMENT ONLY):

bashnpx prisma migrate reset

Check migration status:

bashnpx prisma migrate status

Force deploy:

bashnpx prisma migrate deploy --force
Redis Connection Error
Solutions:

Start Redis:

bashsudo systemctl start redis
# atau
docker start bumas-redis

Check Redis:

bashredis-cli ping
# Should return PONG
High CPU Usage
Diagnosis:
bash# Check Node.js processes
top -p $(pgrep -d',' node)

# Check slow queries
docker exec -it bumas-postgres psql -U bumas -c "
  SELECT query, calls, mean_exec_time
  FROM pg_stat_statements
  ORDER BY mean_exec_time DESC
  LIMIT 10;
"
```

**Solutions:**
1. Add database indexes
2. Implement caching
3. Optimize queries
4. Scale horizontally

## Mobile Issues

### Flutter Build Failed

**Error:**
```
Gradle build failed
Solutions:

Clean build:

bashflutter clean
flutter pub get
flutter build apk

Check Java version:

bashjava -version
# Should be 17

Update Gradle:

bashcd android
./gradlew wrapper --gradle-version 8.0
App Crashes on Startup
Diagnosis:
bash# Android
adb logcat | grep flutter

# iOS
xcrun simctl spawn booted log stream --predicate 'processImagePath contains "Runner"'
Common Causes:

Missing permissions
Invalid API URL
Hive initialization failed
Corrupted local data

Solutions:

Check permissions in AndroidManifest.xml / Info.plist
Verify .env configuration
Clear app data:

bash# Android
adb shell pm clear id.bumas.app

# iOS - delete and reinstall
Sync Issues
Symptoms:

Offline transactions not syncing
Pending count increasing

Solutions:

Check network:

dartfinal connectivity = await Connectivity().checkConnectivity();
print(connectivity); // Should not be none

Clear sync queue:

dartawait HiveService.syncQueueBox.clear();

Force sync:

dartawait ref.read(syncProvider.notifier).sync();
Barcode Scanner Not Working
Solutions:

Grant camera permission
Test on physical device (not emulator)
Check camera availability:

dartfinal cameras = await availableCameras();
print(cameras.length); // Should be > 0
Deployment Issues
Docker Container Won't Start
Diagnosis:
bashdocker-compose logs app
Common Issues:

Port already in use:

bash# Check what's using port 3000
sudo lsof -i :3000
# Kill process
sudo kill -9 <PID>

Environment variables missing:

bash# Check if .env.production exists
ls -la .env.production

# Validate required vars
grep -E "DATABASE_URL|JWT_SECRET" .env.production

Database not ready:

yaml# Add depends_on with health check
depends_on:
  postgres:
    condition: service_healthy
```

### SSL Certificate Issues

**Error:**
```
SSL handshake failed
Solutions:

Renew Let's Encrypt certificate:

bashsudo certbot renew
sudo systemctl reload nginx

Check certificate expiry:

bashecho | openssl s_client -servername api.bumas.id -connect api.bumas.id:443 2>/dev/null | openssl x509 -noout -dates
High Memory Usage
Diagnosis:
bash# Check memory
docker stats

# Check Node.js heap
curl http://localhost:3000/health
Solutions:

Increase memory limit:

yamldeploy:
  resources:
    limits:
      memory: 2G

Enable heap snapshots:

javascript// In main.ts
if (process.env.NODE_ENV === 'production') {
  const v8 = require('v8');
  v8.writeHeapSnapshot();
}
Database Performance Issues
Slow Queries:
sql-- Find slow queries
SELECT query, mean_exec_time, calls
FROM pg_stat_statements
WHERE mean_exec_time > 100
ORDER BY mean_exec_time DESC;

-- Add indexes
CREATE INDEX idx_sales_created_at ON sales(created_at);
CREATE INDEX idx_receivables_warung_status ON receivables(warung_id, status);
High Connection Count:
bash# Check connections
psql -c "SELECT count(*) FROM pg_stat_activity;"

# Kill idle connections
psql -c "SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE state = 'idle';"
Production Monitoring
Setup Alerts
Health Check:
bash# Add to crontab
*/5 * * * * curl -f https://api.bumas.id/health || echo "API DOWN!" | mail -s "BUMAS Alert" admin@bumas.id
Disk Space:
bash# Monitor disk usage
df -h | grep '9[0-9]%' && echo "Disk almost full!" | mail -s "Disk Alert" admin@bumas.id
Log Analysis
Check errors:
bash# Last 100 errors
docker-compose logs app | grep ERROR | tail -100

# Errors by type
docker-compose logs app | grep ERROR | awk '{print $NF}' | sort | uniq -c | sort -rn
Response times:
bash# Slow requests (> 1s)
docker-compose logs nginx | awk '$NF > 1.0 {print $0}'
Getting Help
If issue persists:

Check documentation: https://docs.bumas.id
Search issues: https://github.com/bumas/issues
Create issue: Include:

Error message
Steps to reproduce
Environment details
Logs


Contact support: support@bumas.id

Emergency Contacts

On-call Developer: +62-812-xxxx-xxxx
DevOps: +62-813-xxxx-xxxx
Project Manager: +62-811-xxxx-xxxx